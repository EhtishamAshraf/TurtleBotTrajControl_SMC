# TurtleBot 8-Shape Trajectory Tracking Using FBTC and FBSMC
This repository contains a ROS-based implementation for comparing Flatness-Based Trajectory Control (FBTC) and Flatness-Based Sliding Mode Control (FBSMC) for trajectory tracking on a TurtleBot. The robot is tasked with following an 8-shaped trajectory, and the performance of both control strategies is analyzed using logged data.

## Features
  ROS Package: trajectory_control_pkg.
  Control Algorithms:
      FBTC: A control method using differential flatness for trajectory planning and tracking.
      FBSMC: A robust control method combining sliding mode control with flatness for better disturbance rejection.
  Trajectory Tracking:
      The robot navigates the 8-shaped trajectory in simulation and physical world.
      Pose data of the robot is logged for post-processing and analysis.
  Data Analysis:
      Pose data is saved to an Excel file.
      Visual comparisons of the reference trajectory versus actual trajectory for both FBTC and FBSMC are provided.

# Demo Videos
## FBTC
You can watch the demo video of Trajectory following with FBTC by clicking on the below image

## FBSMC
You can watch the demo video of Trajectory following with FBTC by clicking on the below image

# Gazebo World
For this project,empty Gazebo world is used as shown below

## Note
Details about cloning the repository are given at the end of this readme file

# 8-shape Trajectory Following
The trajectory is mathematically defined using parametric equations to create a smooth figure-eight path. Two controllers are used for this purpose: 
1.  Flatness-Based Trajectory Controller (FBTC)
2.  Flatness-Based Sliding Mode Controller (FBSMC)
The robot starts at a predefined position (X = 0, Y = 0, heading angle = ) and follows the trajectory using real-time velocity commands generated by the controllers. Both methods are compared in terms of tracking accuracy, robustness, and computational efficiency. Data collected during the execution, including actual poses and errors, are logged in an Excel file for analysis. 
Results are visualized as plots, showing the reference trajectory, the robot's actual path with both controllers. The project demonstrates effective trajectory tracking, with comparisons highlighting the strengths of each control method for handling nonlinear dynamics.

### Mathematical Formulation of the Desired Trajectory
The 8-shaped trajectory is generated using parametric equations, defining the desired position, velocity, and acceleration at any given time \( t \). These values are used for accurate trajectory tracking by the controllers.

### Target Trajectory
The desired position of the robot along the \( x \)- and \( y \)-axes is defined as:
- \( x_{target} = A \cdot \sin(\omega \cdot t) \)
- \( y_{target} = B \cdot \sin(2 \cdot \omega \cdot t) \)

**Variables:**
- \( A \): Amplitude constant that defines the size of the trajectory along the \( x \)-axis.
- \( B \): Amplitude constant that defines the size of the trajectory along the \( y \)-axis.
- \( \omega \): Angular velocity that controls the speed of traversal.
- \( t \): Time variable.

### First Derivative (Velocity)
The velocity components along the \( x \)- and \( y \)-axes are given by:
- \( \dot{x}_{target} = A \cdot \omega \cdot \cos(\omega \cdot t) \)
- \( \dot{y}_{target} = 2 \cdot B \cdot \omega \cdot \cos(2 \cdot \omega \cdot t) \)

These represent the desired linear velocities of the robot.

### Second Derivative (Acceleration)
The acceleration components for the trajectory are derived as:
- \( \ddot{x}_{target} = -A \cdot \omega^2 \cdot \sin(\omega \cdot t) \)
- \( \ddot{y}_{target} = -4 \cdot B \cdot \omega^2 \cdot \sin(2 \cdot \omega \cdot t) \)

These values are used to refine control inputs and ensure smooth motion tracking.

### Purpose
These equations are implemented in the trajectory tracking code, allowing the controllers (e.g., FBTC and FBSMC) to calculate the necessary control inputs for precise 8-shaped trajectory following by the TurtleBot. The dynamic computation of motion parameters ensures accuracy and robustness during real-time execution.

## Flatness-Based Trajectory Controller (FBTC)

## Flatness-Based Sliding Mode Controller (FBSMC)


# Robot's Pose data
While the robot is following the 8 shape trajectory, its position and orientation data are continuously recorded in a .csv file. This stored data is later utilized to do the comparison of FBTC and FBSMC.


# Running the Simulation
To run the simulation, there are two options: A. In order to do the mapping using SLAM, launch the slam_lane_tracking launch file. B. In order to do the navigation, launch the navigation launch file. Navigate inside the workspace and then, use either of the following command:



